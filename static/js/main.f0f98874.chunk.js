(this.webpackJsonpKloopArticles=this.webpackJsonpKloopArticles||[]).push([[0],{199:function(e,t,n){},208:function(e,t,n){},212:function(e,t,n){"use strict";n.r(t);var a=n(17),r=n.n(a),s=n(183),i=n.n(s),c=(n(199),n(236)),o=n(247),d=n(189),l=n(43),u=n(114),h=n(97),b=n(164),g=n(177),_=n(244),j=Object(_.a)('\n        query MyQuery($startDate: String = "", $endDate: String = "") {\n            unique_per(where: {ner: {texts: {date_publish: {_gte: $startDate, _lte: $endDate}}}}, order_by: {ner_aggregate: {count: desc}}) {\n                nom_name\n                ner_aggregate(where: {texts: {date_publish: {_gte: $startDate, _lte: $endDate}}}) {\n                    aggregate {\n                        count\n                    }\n                }\n                ner(where: {texts: {date_publish: {_gte: $startDate, _lte: $endDate}}}) {\n                    texts(where: {date_publish: {_gte: $startDate, _lte: $endDate}}, distinct_on: url) {\n                        date_publish\n                    }\n                }\n            }\n        }\n    '),p=Object(_.a)('\n        query MyQuery($startDate: String = "", $endDate: String = "", $media: String = "") {\n            unique_per(where: {ner: {texts: {date_publish: {_gte: $startDate, _lte: $endDate}, mass_media_name: {_eq: $media}}}}, order_by: {ner_aggregate: {count: desc}}) {\n                nom_name\n                ner_aggregate(where: {_and: {texts: {date_publish: {_gte: $startDate, _lte: $endDate}, mass_media_name: {_eq: $media}}}}) {\n                    aggregate {\n                        count\n                    }\n                }\n                ner(where: {texts: {date_publish: {_gte: $startDate, _lte: $endDate}, mass_media_name: {_eq: $media}}}) {\n                    texts(where: {date_publish: {_gte: $startDate, _lte: $endDate}, mass_media_name: {_eq: $media}}, distinct_on: url) {\n                        date_publish\n                        url\n                    }\n                }\n            }\n        }\n    '),f=(Object(_.a)("\n        query MyQuery($startDate: String, $endDate: String) {\n            mass_media(distinct_on: mass_media_name, where: {date_publish: {_gte: $startDate, _lte: $endDate}}) {\n                mass_media_name\n            }\n        }\n    "),n(245)),m=n(241),O=n(233),v=function(e){return e.map((function(e){var t=function(e){var t={};return e.forEach((function(e){return e.texts.forEach((function(e){var n=Object(m.a)(Object(O.a)(e.date_publish),"yyyy-MM-dd");t[n]=(t[n]||0)+1}))})),t}(e.ner);return{name:e.nom_name,count:e.ner_aggregate.aggregate.count,dates:t}})).sort((function(e,t){return t.count-e.count}))},x=n(246),w=n(40),D=n(182),y=function(){var e=D.parse(window.location.search),t=e.start,n=e.end,r=Object(a.useState)([]),s=Object(u.a)(r,2),i=s[0],c=s[1],o=Object(a.useRef)(null),d=Object(f.a)(j,{variables:{startDate:t+" 00:00:00",endDate:n+" 24:00:00"},notifyOnNetworkStatusChange:!0}),l=d.loading,_=(d.error,d.data);d.refetch;return Object(a.useEffect)((function(){if(_){console.log(_);var e=v(_.unique_per).slice(0,100);console.log(e),c(e)}}),[_]),Object(a.useLayoutEffect)((function(){h.c(b.a);var e=h.b("chartdiv",g.a);e.fontFamily="Courier New";var t=e.series.push(new g.b);t.randomness=.1,t.rotationThreshold=.5,t.data=i,t.dataFields.word="name",t.dataFields.value="count",t.heatRules.push({target:t.labels.template,property:"fill",min:h.a("#0000CC"),max:h.a("#CC00CC"),dataField:"value"}),t.labels.template.tooltipText="{word}: {value}",t.labels.template.states.create("hover").properties.fill=h.a("#FF0000");var n=e.titles.create();return n.text="\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435 \u0438\u043c\u0435\u043d\u0430",n.fontSize=18,n.fontWeight="700",o.current=e,function(){e.dispose()}}),[i]),Object(w.jsx)("div",{children:l?Object(w.jsx)(x.a,{style:{padding:20}}):Object(w.jsx)("div",{id:"chartdiv",style:{width:"100%",height:"500px"}})})},$=n(95),S=n(174),C=n(115),q=n(182),F=function(){var e=Object(a.useRef)(null),t=Object(a.useState)([]),n=Object(u.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)([]),c=Object(u.a)(i,2),o=c[0],d=c[1],l=q.parse(window.location.search),g=l.start,_=l.end,m=l.media;console.log(g,_,m);var O=Object(f.a)(m?p:j,{variables:{startDate:g+" 00:00:00",endDate:_+" 24:00:00",media:null!==m&&void 0!==m?m:""},notifyOnNetworkStatusChange:!0}),D=O.loading,y=(O.error,O.data);O.refetch;return Object(a.useEffect)((function(){if(y){console.log(y);var e=v(y.unique_per).slice(0,5);if(console.log(e),e.length>0){d(e);var t={};e.forEach((function(e){var n=e.dates;Object.keys(n).forEach((function(a){return t[a]=Object(S.a)(Object(S.a)({},t[a]),{},Object($.a)({date:a},e.name,n[a]))}))}));var n=Object.values(t).sort((function(e,t){return new Date(t.date)-new Date(e.date)}));console.log("all data",n),s(n)}}}),[y]),Object(a.useLayoutEffect)((function(){h.c(b.a);var t=h.b("linechart",C.e);t.colors.step=4,t.data=r,t.xAxes.push(new C.a).renderer.minGridDistance=60;var n=t.yAxes.push(new C.d);o.forEach((function(e){return function(e,a,r){var s=t.series.push(new C.c);s.dataFields.valueY=e,s.dataFields.dateX="date",s.strokeWidth=2,s.yAxis=n,s.name=a,s.tooltipText="{name}: [bold]{valueY}[/]",s.tensionX=.8,s.showOnInit=!0}(e.name,e.name)})),t.legend=new C.b,t.cursor=new C.f;var a=t.titles.create();return r.length>0?a.text="\u0422\u043e\u043f 5 \u0438\u043c\u0435\u043d ".concat(null!==m&&void 0!==m?m:""," \u0437\u0430 (").concat(g," - ").concat(_,")"):a.text="\u0422\u043e\u043f 5 \u0438\u043c\u0435\u043d",a.fontSize=18,a.fontWeight="700",e.current=t,function(){t.dispose()}}),[r]),Object(w.jsx)("div",{children:D?Object(w.jsx)(x.a,{style:{padding:20}}):Object(w.jsx)("div",{id:"linechart",style:{width:"100%",height:"500px"}})})},E=(n(206),n(207),n(208),Object(c.a)((function(e){return Object(o.a)({formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}})})),function(){return Object(w.jsx)("div",{className:"App",children:Object(w.jsx)(d.a,{children:Object(w.jsx)("div",{children:Object(w.jsxs)(l.c,{children:[Object(w.jsx)(l.a,{path:"/cloud",children:Object(w.jsx)(y,{})}),Object(w.jsx)(l.a,{path:"/line",children:Object(w.jsx)(F,{})}),Object(w.jsx)(l.a,{path:"/"})]})})})})}),k=function(e){e&&e instanceof Function&&n.e(7).then(n.bind(null,457)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),s(e),i(e)}))},A=n(242),M=n(243),T=n(240),L=new A.a({uri:"https://splendid-adder-68.hasura.app/v1/graphql",cache:new M.a});i.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(T.a,{client:L,children:Object(w.jsx)(E,{})})}),document.getElementById("root")),k()}},[[212,1,3]]]);
//# sourceMappingURL=main.f0f98874.chunk.js.map