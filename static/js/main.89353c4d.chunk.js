(this.webpackJsonpKloopArticles=this.webpackJsonpKloopArticles||[]).push([[0],{199:function(e,t,n){},208:function(e,t,n){},212:function(e,t,n){"use strict";n.r(t);var a=n(17),r=n.n(a),s=n(183),i=n.n(s),c=(n(199),n(236)),d=n(247),o=n(189),l=n(43),u=n(114),h=n(97),g=n(164),_=n(177),b=n(244),p=Object(b.a)('\n        query MyQuery($startDate: String = "", $endDate: String = "") {\n            unique_per(where: {ner: {texts: {date_publish: {_gte: $startDate, _lte: $endDate}}}}, order_by: {ner_aggregate: {count: desc}}) {\n                nom_name\n                ner_aggregate(where: {texts: {date_publish: {_gte: $startDate, _lte: $endDate}}}) {\n                    aggregate {\n                        count\n                    }\n                }\n                ner(where: {texts: {date_publish: {_gte: $startDate, _lte: $endDate}}}) {\n                    texts(where: {date_publish: {_gte: $startDate, _lte: $endDate}}, distinct_on: url) {\n                        date_publish\n                    }\n                }\n            }\n        }\n    '),j=Object(b.a)('\n        query MyQuery($startDate: String = "", $endDate: String = "", $pers: [String!] ) {\n            unique_per(where: {ner: {texts: {date_publish: {_gte: $startDate, _lte: $endDate}}, nom_name: {_in: $pers}}}, order_by: {ner_aggregate: {count: desc}}) {\n                nom_name\n                ner_aggregate(where: {texts: {date_publish: {_gte: $startDate, _lte: $endDate}}}) {\n                    aggregate {\n                        count\n                    }\n                }\n                ner(where: {texts: {date_publish: {_gte: $startDate, _lte: $endDate}}}) {\n                    texts(where: {date_publish: {_gte: $startDate, _lte: $endDate}}, distinct_on: url) {\n                        date_publish\n                    }\n                }\n            }\n        }\n    '),m=Object(b.a)('\n        query MyQuery($startDate: String = "", $endDate: String = "", $media: String = "") {\n            unique_per(where: {ner: {texts: {date_publish: {_gte: $startDate, _lte: $endDate}, mass_media_name: {_eq: $media}}}}, order_by: {ner_aggregate: {count: desc}}) {\n                nom_name\n                ner_aggregate(where: {_and: {texts: {date_publish: {_gte: $startDate, _lte: $endDate}, mass_media_name: {_eq: $media}}}}) {\n                    aggregate {\n                        count\n                    }\n                }\n                ner(where: {texts: {date_publish: {_gte: $startDate, _lte: $endDate}, mass_media_name: {_eq: $media}}}) {\n                    texts(where: {date_publish: {_gte: $startDate, _lte: $endDate}, mass_media_name: {_eq: $media}}, distinct_on: url) {\n                        date_publish\n                        url\n                    }\n                }\n            }\n        }\n    '),f=(Object(b.a)("\n        query MyQuery($startDate: String, $endDate: String) {\n            mass_media(distinct_on: mass_media_name, where: {date_publish: {_gte: $startDate, _lte: $endDate}}) {\n                mass_media_name\n            }\n        }\n    "),n(245)),O=n(241),x=n(233),v=function(e){return e.map((function(e){var t=function(e){var t={};return e.forEach((function(e){return e.texts.forEach((function(e){var n=Object(O.a)(Object(x.a)(e.date_publish),"yyyy-MM-dd");t[n]=(t[n]||0)+1}))})),t}(e.ner);return{name:e.nom_name,count:e.ner_aggregate.aggregate.count,dates:t}})).sort((function(e,t){return t.count-e.count}))},D=n(246),$=n(40),w=n(182),y=function(){var e=w.parse(window.location.search),t=e.start,n=e.end,r=Object(a.useState)([]),s=Object(u.a)(r,2),i=s[0],c=s[1],d=Object(a.useRef)(null),o=Object(f.a)(p,{variables:{startDate:t+" 00:00:00",endDate:n+" 24:00:00"},notifyOnNetworkStatusChange:!0}),l=o.loading,b=(o.error,o.data);o.refetch;return Object(a.useEffect)((function(){if(b){console.log(b);var e=v(b.unique_per).slice(0,100);console.log(e),c(e)}}),[b]),Object(a.useLayoutEffect)((function(){h.c(g.a);var e=h.b("chartdiv",_.a);e.fontFamily="Courier New";var t=e.series.push(new _.b);t.randomness=.1,t.rotationThreshold=.5,t.data=i,t.dataFields.word="name",t.dataFields.value="count",t.heatRules.push({target:t.labels.template,property:"fill",min:h.a("#0000CC"),max:h.a("#CC00CC"),dataField:"value"}),t.labels.template.tooltipText="{word}: {value}",t.labels.template.states.create("hover").properties.fill=h.a("#FF0000");var n=e.titles.create();return n.text="\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435 \u0438\u043c\u0435\u043d\u0430",n.fontSize=18,n.fontWeight="700",d.current=e,function(){e.dispose()}}),[i]),Object($.jsx)("div",{children:l?Object($.jsx)(D.a,{style:{padding:20}}):Object($.jsx)("div",{id:"chartdiv",style:{width:"100%",height:"500px"}})})},S=n(95),q=n(174),C=n(115),F=n(182),E=function(){var e=Object(a.useRef)(null),t=Object(a.useState)([]),n=Object(u.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)([]),c=Object(u.a)(i,2),d=c[0],o=c[1],l=F.parse(window.location.search,{arrayFormat:"bracket"}),_=l.start,b=l.end,O=l.media,x=l.pers,w=5;console.log(_,b,O,x);var y=p;O?y=m:x&&(y=j,!O&&x.length>0&&(w=x.length));var E=Object(f.a)(y,{variables:{startDate:_+" 00:00:00",endDate:b+" 24:00:00",media:null!==O&&void 0!==O?O:"",pers:null!==x&&void 0!==x?x:[]},notifyOnNetworkStatusChange:!0}),k=E.loading,M=(E.error,E.data);E.refetch;return Object(a.useEffect)((function(){if(M){console.log(M);var e=v(M.unique_per).slice(0,w);if(console.log(e),e.length>0){o(e);var t={};e.forEach((function(e){var n=e.dates;Object.keys(n).forEach((function(a){return t[a]=Object(q.a)(Object(q.a)({},t[a]),{},Object(S.a)({date:a},e.name,n[a]))}))}));var n=Object.values(t).sort((function(e,t){return new Date(t.date)-new Date(e.date)}));console.log("all data",n),s(n)}}}),[M]),Object(a.useLayoutEffect)((function(){h.c(g.a);var t=h.b("linechart",C.e);t.colors.step=4,t.data=r,t.xAxes.push(new C.a).renderer.minGridDistance=60;var n=t.yAxes.push(new C.d);d.forEach((function(e){return function(e,a,r){var s=t.series.push(new C.c);s.dataFields.valueY=e,s.dataFields.dateX="date",s.strokeWidth=2,s.yAxis=n,s.name=a,s.tooltipText="{name}: [bold]{valueY}[/]",s.tensionX=.8,s.showOnInit=!0}(e.name,e.name)})),t.legend=new C.b,t.cursor=new C.f;var a=t.titles.create();return r.length>0?a.text="\u0422\u043e\u043f ".concat(w," \u0438\u043c\u0435\u043d ").concat(null!==O&&void 0!==O?O:""," \u0437\u0430 (").concat(_," - ").concat(b,")"):a.text="\u0422\u043e\u043f 5 \u0438\u043c\u0435\u043d",a.fontSize=18,a.fontWeight="700",e.current=t,function(){t.dispose()}}),[r]),Object($.jsx)("div",{children:k?Object($.jsx)(D.a,{style:{padding:20}}):Object($.jsx)("div",{id:"linechart",style:{width:"100%",height:"500px"}})})},k=(n(206),n(207),n(208),Object(c.a)((function(e){return Object(d.a)({formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}})})),function(){return Object($.jsx)("div",{className:"App",children:Object($.jsx)(o.a,{children:Object($.jsx)("div",{children:Object($.jsxs)(l.c,{children:[Object($.jsx)(l.a,{path:"/cloud",children:Object($.jsx)(y,{})}),Object($.jsx)(l.a,{path:"/line",children:Object($.jsx)(E,{})}),Object($.jsx)(l.a,{path:"/"})]})})})})}),M=function(e){e&&e instanceof Function&&n.e(7).then(n.bind(null,457)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),s(e),i(e)}))},A=n(242),T=n(243),L=n(240),N=new A.a({uri:"https://splendid-adder-68.hasura.app/v1/graphql",cache:new T.a});i.a.render(Object($.jsx)(r.a.StrictMode,{children:Object($.jsx)(L.a,{client:N,children:Object($.jsx)(k,{})})}),document.getElementById("root")),M()}},[[212,1,3]]]);
//# sourceMappingURL=main.89353c4d.chunk.js.map